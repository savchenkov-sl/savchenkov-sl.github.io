(self["webpackChunkq"]=self["webpackChunkq"]||[]).push([[589],{6030:(o,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>P});var n=t(3673),s=t(2323);const d={class:"scale",style:{position:"fixed",right:"10px",top:"70px"}},i={class:"col q-gutter-sm"},r={class:"row"},l={class:"row"},a={class:"row"},c={class:"row"},u={class:"row text-center",style:{"padding-left":"5px",color:"#aaa"}};function m(o,e,t,m,h,p){const f=(0,n.up)("Lines"),g=(0,n.up)("MindMap"),I=(0,n.up)("q-btn"),w=(0,n.up)("Editor");return(0,n.wg)(),(0,n.j4)(n.HY,null,[(0,n.Wm)("div",{class:"scaled-div",style:"transform: scale("+o.$root.scale+");"},[(0,n.Wm)(f),null!==o.$root.selectedMapId?((0,n.wg)(),(0,n.j4)(g,{key:0,node:o.$root.selectedMap},null,8,["node"])):(0,n.kq)("",!0)],4),(0,n.Wm)("div",d,[(0,n.Wm)("div",i,[(0,n.Wm)("div",r,[(0,n.Wm)(I,{outline:"",round:"",color:"primary",icon:"remove",onClick:o.$root.downScale},null,8,["onClick"])]),(0,n.Wm)("div",l,[(0,n.Wm)(I,{outline:"",round:"",color:"primary",icon:"add",onClick:o.$root.upScale},null,8,["onClick"])]),(0,n.Wm)("div",a,[o.$root.ifFullscreen?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(I,{key:0,outline:"",round:"",color:"primary",icon:"fullscreen",onClick:e[1]||(e[1]=e=>o.fullscreen())}))]),(0,n.Wm)("div",c,[o.$root.ifFullscreen?((0,n.wg)(),(0,n.j4)(I,{key:0,outline:"",round:"",color:"primary",icon:"fullscreen_exit",onClick:e[2]||(e[2]=e=>o.fullscreenOff())})):(0,n.kq)("",!0)]),(0,n.Wm)("div",u,(0,s.zw)(Math.round(100*o.$root.scale))+"% ",1)])]),(0,n.Wm)(w)],64)}var h=t(8416);const p=(0,n.HX)("data-v-7eda388e"),f=p(((o,e,t,s,d,i)=>{const r=(0,n.up)("Node");return(0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(t.node.nodes,(o=>((0,n.wg)(),(0,n.j4)(r,{key:o.id,node:o,mapId:o.id},null,8,["node","mapId"])))),128)})),g={class:"node"};function I(o,e,t,s,d,i){const r=(0,n.up)("Note"),l=(0,n.up)("Node",!0);return(0,n.wg)(),(0,n.j4)(n.HY,null,[(0,n.Wm)(r,{nodeInfo:o.$root.nodesInfos[t.node.id],node:t.node,onClick:i.clickOnNote,onAddInnerNode:i.addInnerNode,onDelete:e[1]||(e[1]=e=>o.$root.deleteNode(o.$parent,i.innerNodesIds,i.pathToNode)),onOpenEditor:e[2]||(e[2]=e=>{o.$root.openEditor(o.$root.nodesInfos[t.node.id])})},null,8,["nodeInfo","node","onClick","onAddInnerNode"]),(0,n.Wm)("div",g,[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(t.node.nodes,((o,e)=>((0,n.wg)(),(0,n.j4)(l,{key:o.id,node:o,mapId:t.mapId,ref:o=>{o&&(d.childs[e]=o)}},null,8,["node","mapId"])))),128))])],64)}t(71),t(246);var w=t(8880);const v={key:0,class:"row top-buttons shadow-0"},k={class:"col"},y={class:"col"},M={class:"col"},$={class:"col"},N={class:"row"},x={class:"text-h6"},W={class:"row"};function q(o,e,t,d,i,r){const l=(0,n.up)("q-btn"),a=(0,n.up)("q-card-section"),c=(0,n.up)("q-icon"),u=(0,n.up)("q-chip"),m=(0,n.up)("q-card-actions"),h=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(h,{class:["draggable-card",{"shadow-20 goal":r.isGoal}],id:"note-"+t.node.id,onMouseover:e[7]||(e[7]=o=>i.showButtons=!0),onMouseleave:e[8]||(e[8]=o=>i.showButtons=!1),onClick:r.clickHandler,onBlur:e[9]||(e[9]=o=>i.showButtons=!1),style:"position: absolute; left: "+t.nodeInfo.style.x+"px; top: "+t.nodeInfo.style.y+"px; border-color: "+t.nodeInfo.style.color+";background-color: "+t.nodeInfo.style.color+";"},{default:(0,n.w5)((()=>[(0,n.Wm)(w.uT,{name:"slidedown"},{default:(0,n.w5)((()=>[i.showButtons?((0,n.wg)(),(0,n.j4)("div",v,[(0,n.Wm)("div",k,[(0,n.Wm)(l,{flat:"",size:"lg","text-color":"primary",icon:"edit",onClick:e[1]||(e[1]=e=>o.$emit("openEditor"))})]),(0,n.Wm)("div",y,[(0,n.Wm)(l,{flat:"",size:"lg","text-color":"red-10",icon:"block",onClick:e[2]||(e[2]=(0,w.iM)((e=>o.$emit("delete")),["stop"]))})]),(0,n.Wm)("div",M,[(0,n.Wm)(l,{flat:"",size:"lg","text-color":"primary",icon:"add",onClick:e[3]||(e[3]=(0,w.iM)((e=>o.$emit("addInnerNode")),["stop"]))})]),(0,n.Wm)("div",$,[(0,n.Wm)(l,{flat:"",size:"lg","text-color":"primary",icon:"open_with",onClick:e[4]||(e[4]=(0,w.iM)((()=>{}),["stop"])),onMousedown:e[5]||(e[5]=(0,w.iM)((o=>r.startMoveMouse(o,t.nodeInfo)),["stop"])),onTouchstart:e[6]||(e[6]=(0,w.iM)((o=>r.startMoveTouch(o,t.nodeInfo)),["stop"]))})])])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(a,{class:"q-pt-xs no-filter"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",N,[(0,n.Wm)("div",x,(0,s.zw)(t.nodeInfo.name),1)]),(0,n.wy)((0,n.Wm)("div",W,[(0,n.Wm)("div",{class:"text-caption description",innerHTML:t.nodeInfo.description},null,8,["innerHTML"])],512),[[w.F8,""!==t.nodeInfo.description]])])),_:1}),(0,n.Wm)(m,{class:"no-filter card-actions"},{default:(0,n.w5)((()=>[r.importanceIcon?((0,n.wg)(),(0,n.j4)(c,{key:0,name:r.importanceIcon,size:"sm"},null,8,["name"])):(0,n.kq)("",!0),r.pleasantnessIcon?((0,n.wg)(),(0,n.j4)(c,{key:1,name:r.pleasantnessIcon,size:"sm"},null,8,["name"])):(0,n.kq)("",!0),r.easinessIcon?((0,n.wg)(),(0,n.j4)(c,{key:2,name:r.easinessIcon,size:"sm"},null,8,["name"])):(0,n.kq)("",!0),null!=t.nodeInfo.time.start?((0,n.wg)(),(0,n.j4)(u,{key:3,square:"",color:"grey-4 shadow-1","text-color":r.timeColor,icon:"event",size:"sm"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(r.startTime),1)])),_:1},8,["text-color"])):(0,n.kq)("",!0),null!=r.duration?((0,n.wg)(),(0,n.j4)(u,{key:4,square:"",color:"grey-4 shadow-1","text-color":"black",icon:"timelapse",size:"sm"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(r.duration),1)])),_:1})):(0,n.kq)("",!0),null!=t.nodeInfo.cost?((0,n.wg)(),(0,n.j4)(u,{key:5,square:"",color:"grey-4 shadow-1","text-color":"green-7",size:"sm"},{default:(0,n.w5)((()=>[(0,n.Uk)(" $ "+(0,s.zw)(t.nodeInfo.cost),1)])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1},8,["id","class","onClick","style"])}var Y=t(1488),C=t.n(Y);const _={name:"Note",props:["nodeInfo","node"],data(){return{showButtons:!1}},computed:{isGoal(){return"goal"===this.nodeInfo.type||!(null!==this.nodeInfo.time.start||null!==this.nodeInfo.time.durationMins||null!==this.nodeInfo.time.repeatType||this.node.nodes.length<2)},startTime(){return null===this.nodeInfo.time.start?C()().format("D.MM.YYYY, k:mm"):C()(this.nodeInfo.time.start).format("D.MM.YYYY, k:mm")},isOld(){if(null!=this.nodeInfo.time.start){let o=new Date;return C()(this.nodeInfo.time.start).toDate()<o}return!1},timeColor(){return this.isOld?"red-10":"black"},duration(){if(null===this.nodeInfo.time.durationMins)return null;let o=this.nodeInfo.time.durationMins%60,e=(this.nodeInfo.time.durationMins-o)/60;return e?`${e}ч. ${o}м.`:`${o}м.`},importanceIcon(){return this.nodeInfo.scrum.importance>80?"error_outline":this.nodeInfo.scrum.importance>60?"priority_high":this.nodeInfo.scrum.importance<20?"beach_access":null},pleasantnessIcon(){return this.nodeInfo.scrum.pleasantness>80?"sentiment_satisfied_alt":this.nodeInfo.scrum.pleasantness>60?"sentiment_satisfied":this.nodeInfo.scrum.pleasantness<40?"sentiment_very_dissatisfied":null},easinessIcon(){return this.nodeInfo.scrum.easiness>80?"child_care":this.nodeInfo.scrum.easiness<20?"psychology":null}},methods:{clickHandler(){this.showButtons=!0},startMoveMouse(o,e){let t=[];this.$root.recursiveMapWalk(this.node,(o=>{t.push(this.$root.nodesInfos[o.id])})),console.log("childNodesInfos",t),this.$root.startMoveMouse(o,t)},startMoveTouch(o,e){let t=[];this.$root.recursiveMapWalk(this.node,(o=>{t.push(this.$root.nodesInfos[o.id])})),console.log("childNodesInfos",t),this.$root.startMoveTouch(o,t)}},created(){console.log("Note created"),console.log(this.nodeInfo),console.log("node",this.node)}};var j=t(151),z=t(2165),S=t(5589),T=t(9367),b=t(4554),H=t(7030),X=t(7518),B=t.n(X);_.render=q;const Z=_;B()(_,"components",{QCard:j.Z,QBtn:z.Z,QCardSection:S.Z,QCardActions:T.Z,QIcon:b.Z,QChip:H.Z});const D={name:"Node",props:["node","mapId"],components:{Note:Z},data(){return{childs:[]}},methods:{addInnerNode(){console.log("addInnerNode"),this.$root.createNewNode(this.node)},clickOnNote(){this.$q.screen.gt.md&&this.$root.openEditor(this.$root.nodesInfos[this.node.id])},help(){console.log(this.$parent)}},created(){console.log("Node created"),console.log(this.node)},computed:{pathToNode(){return"Node"!==this.$parent.$options.name?[this.node.id]:[...this.$parent.pathToNode,this.node.id]},innerNodesIds(){let o=[this.node.id];return this.childs.map((e=>{o=o.concat(e.innerNodesIds)})),o}}};D.render=I;const O=D,Q={name:"MindMap",props:["node"],components:{Node:O},methods:{addInnerNode(){console.log("addInnerNode"),this.$root.createNewNode(this.node)}},created(){console.log("MindMap created"),console.log(this.node)}};Q.render=f,Q.__scopeId="data-v-7eda388e";const E=Q;t(2796);const F=(0,n.HX)("data-v-4693d001"),L=F(((o,e,t,s,d,i)=>((0,n.wg)(),(0,n.j4)("div",{class:"lines",style:"width:"+o.$root.mapWidth+"px; height:"+o.$root.mapHeight+"px;"},[((0,n.wg)(),(0,n.j4)("svg",{viewBox:"0 0 "+o.$root.mapWidth+" "+o.$root.mapHeight,xmlns:"http://www.w3.org/2000/svg"},[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(o.$root.lines,((o,e)=>((0,n.wg)(),(0,n.j4)("line",{key:e,x1:o.start[0],y1:o.start[1],x2:o.end[0],y2:o.end[1],style:"stroke: "+o.fromNodeInfo.style.color+"; stroke-width: "+o.width+";"},null,12,["x1","y1","x2","y2"])))),128))],8,["viewBox"]))],4)))),A={name:"Note",props:["nodeInfo"],methods:{},created(){console.log("Line created"),console.log(this.nodeInfo)}};A.render=L,A.__scopeId="data-v-4693d001";const K=A;var U=t(4795);const G=(0,n.aZ)({name:"PageIndex",components:{Editor:U.Z,MindMap:E,Lines:K},data(){return{x:100,y:100,dragg:{isDragg:!1,mouseStartX:0,mouseStartY:0,divStartX:0,divStartY:0}}},methods:{async fullscreen(){await h.Z.request(),this.$root.ifFullscreen=!0},async fullscreenOff(){await h.Z.exit(),this.$root.ifFullscreen=!1},startMove(o,e){this.dragg.isDragg=!0,this.dragg.mouseStartX=o,this.dragg.mouseStartY=e,this.dragg.divStartX=this.x,this.dragg.divStartY=this.y},move(o,e){this.x=this.dragg.divStartX+o-this.dragg.mouseStartX,this.y=this.dragg.divStartY+e-this.dragg.mouseStartY},endMove(){document.ontouchend=null,document.ontouchmove=null,document.onmouseup=null,document.onmousemove=null},startMoveMouse({clientX:o,clientY:e}){this.startMove(o,e),document.onmousemove=({clientX:o,clientY:e})=>{this.move(o,e)},document.onmouseup=()=>{this.endMove()}},startMoveTouch({touches:o}){let e=o[0].clientX,t=o[0].clientY;this.startMove(e,t),document.ontouchmove=({touches:o})=>{let e=o[0].clientX,t=o[0].clientY;this.move(e,t)},document.ontouchend=()=>{this.endMove()}}}});G.render=m;const P=G;B()(G,"components",{QBtn:z.Z})}}]);