(self["webpackChunkq"]=self["webpackChunkq"]||[]).push([[755],{4755:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>B});var l=t(3673),o=t(8880),n=t(2323);const u=(0,l.HX)("data-v-6572ca2e");(0,l.dD)("data-v-6572ca2e");const s=(0,l.Uk)("Сохранить в облако"),r=(0,l.Uk)(" карту можно будет открыть на другом устройстве "),i=(0,l.Uk)("Добавить элемент"),d=(0,l.Uk)(" создать новый корневой элемент на этой карте "),m=(0,l.Uk)("Карта"),p=(0,l.Uk)(" перейти к выбранной карте "),c=(0,l.Uk)("Карты"),f=(0,l.Uk)(" перейти к списку карт "),h=(0,l.Uk)("Задачи на сегодня"),W=(0,l.Uk)(" перейти к списку задач на сегодня и просроченных дел "),b=(0,l.Uk)("Экспорт в файл"),_=(0,l.Uk)(" сохранить карту на этом устройстве "),w=(0,l.Uk)("Импорт из файла");(0,l.Cn)();const k=u(((e,a,t,k,g,$)=>{const U=(0,l.up)("q-linear-progress"),y=(0,l.up)("q-btn"),C=(0,l.up)("q-toolbar-title"),v=(0,l.up)("q-space"),q=(0,l.up)("fb"),F=(0,l.up)("GoogleCalendar"),Z=(0,l.up)("q-toolbar"),I=(0,l.up)("q-header"),Q=(0,l.up)("q-item-label"),D=(0,l.up)("q-icon"),V=(0,l.up)("q-item-section"),A=(0,l.up)("q-item"),O=(0,l.up)("q-file"),x=(0,l.up)("q-list"),L=(0,l.up)("q-drawer"),M=(0,l.up)("router-view"),z=(0,l.up)("q-page-container"),T=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(T,{view:"lHh Lpr lFf"},{default:u((()=>[(0,l.wy)((0,l.Wm)(I,{elevated:"",class:"header"},{default:u((()=>[(0,l.Wm)(Z,{class:"q-gutter-sm-x-sm "},{default:u((()=>[(0,l.wy)((0,l.Wm)(U,{indeterminate:"",class:"absolute",style:{bottom:"-4px",left:"0px"}},null,512),[[o.F8,e.$root.auth.isLoading]]),(0,l.Wm)(y,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:a[1]||(a[1]=a=>e.$root.leftDrawerOpen=!e.$root.leftDrawerOpen)}),(0,l.Wm)(C,{class:"gt-sm"},{default:u((()=>[(0,l.Uk)((0,n.zw)(e.$root.header),1)])),_:1}),(0,l.Wm)(v),(0,l.Wm)(q),(0,l.Wm)(F)])),_:1})])),_:1},512),[[o.F8,!e.$root.ifFullscreen]]),(0,l.Wm)(L,{modelValue:e.$root.leftDrawerOpen,"onUpdate:modelValue":a[8]||(a[8]=a=>e.$root.leftDrawerOpen=a),bordered:"",class:"bg-grey-1",onClick:a[9]||(a[9]=(0,o.iM)((a=>e.$root.leftDrawerOpen=!1),["stop"]))},{default:u((()=>[(0,l.Wm)(x,null,{default:u((()=>[(0,l.Wm)(Q,{header:"",class:"text-grey-8 lt-md",onClick:a[2]||(a[2]=a=>e.$root.test())},{default:u((()=>[(0,l.Uk)((0,n.zw)(e.$root.header)+" "+(0,n.zw)(e.$root.version),1)])),_:1}),(0,l.Wm)(Q,{header:"",class:"text-grey-8 gt-sm",onClick:a[3]||(a[3]=a=>e.$root.test())},{default:u((()=>[(0,l.Uk)((0,n.zw)(e.$root.version),1)])),_:1}),(0,l.Wm)(A,{clickable:"",onClick:e.$root.uploadMapToCloud},{default:u((()=>[(0,l.Wm)(V,{avatar:""},{default:u((()=>[(0,l.Wm)(D,{name:"save"})])),_:1}),(0,l.Wm)(V,null,{default:u((()=>[(0,l.Wm)(Q,null,{default:u((()=>[s])),_:1}),(0,l.Wm)(Q,{caption:""},{default:u((()=>[r])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,l.wy)((0,l.Wm)(A,{clickable:"",onClick:e.$root.createNewRootNode},{default:u((()=>[(0,l.Wm)(V,{avatar:""},{default:u((()=>[(0,l.Wm)(D,{name:"add"})])),_:1}),(0,l.Wm)(V,null,{default:u((()=>[(0,l.Wm)(Q,null,{default:u((()=>[i])),_:1}),(0,l.Wm)(Q,{caption:""},{default:u((()=>[d])),_:1})])),_:1})])),_:1},8,["onClick"]),[[o.F8,"/"===e.$route.path]]),(0,l.wy)((0,l.Wm)(A,{clickable:"",onClick:a[4]||(a[4]=a=>e.$router.push("/"))},{default:u((()=>[(0,l.Wm)(V,{avatar:""},{default:u((()=>[(0,l.Wm)(D,{name:"grid_view"})])),_:1}),(0,l.Wm)(V,null,{default:u((()=>[(0,l.Wm)(Q,null,{default:u((()=>[m])),_:1}),(0,l.Wm)(Q,{caption:""},{default:u((()=>[p])),_:1})])),_:1})])),_:1},512),[[o.F8,"/"!==e.$route.path]]),(0,l.wy)((0,l.Wm)(A,{clickable:"",onClick:a[5]||(a[5]=a=>e.$router.push("/maps"))},{default:u((()=>[(0,l.Wm)(V,{avatar:""},{default:u((()=>[(0,l.Wm)(D,{name:"view_list"})])),_:1}),(0,l.Wm)(V,null,{default:u((()=>[(0,l.Wm)(Q,null,{default:u((()=>[c])),_:1}),(0,l.Wm)(Q,{caption:""},{default:u((()=>[f])),_:1})])),_:1})])),_:1},512),[[o.F8,"/maps"!==e.$route.path]]),(0,l.wy)((0,l.Wm)(A,{clickable:"",onClick:a[6]||(a[6]=a=>e.$router.push("/tasks"))},{default:u((()=>[(0,l.Wm)(V,{avatar:""},{default:u((()=>[(0,l.Wm)(D,{name:"format_list_bulleted"})])),_:1}),(0,l.Wm)(V,null,{default:u((()=>[(0,l.Wm)(Q,null,{default:u((()=>[h])),_:1}),(0,l.Wm)(Q,{caption:""},{default:u((()=>[W])),_:1})])),_:1})])),_:1},512),[[o.F8,"/tasks"!==e.$route.path]]),(0,l.Wm)(A,{clickable:"",onClick:e.$root.downloadAll},{default:u((()=>[(0,l.Wm)(V,{avatar:""},{default:u((()=>[(0,l.Wm)(D,{name:"sim_card_download"})])),_:1}),(0,l.Wm)(V,null,{default:u((()=>[(0,l.Wm)(Q,null,{default:u((()=>[b])),_:1}),(0,l.Wm)(Q,{caption:""},{default:u((()=>[_])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(A,null,{default:u((()=>[(0,l.Wm)(V,{avatar:""},{default:u((()=>[(0,l.Wm)(D,{name:"file_present"})])),_:1}),(0,l.Wm)(V,null,{default:u((()=>[(0,l.Wm)(Q,null,{default:u((()=>[w])),_:1}),(0,l.Wm)(Q,{caption:""},{default:u((()=>[(0,l.Wm)(O,{outlined:"",style:{"max-width":"200px"},modelValue:e.$root.uploadingFile,"onUpdate:modelValue":[a[7]||(a[7]=a=>e.$root.uploadingFile=a),e.$root.uploadAll],label:"Открыть"},{prepend:u((()=>[(0,l.Wm)(D,{name:"attach_file"})])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(z,null,{default:u((()=>[((0,l.wg)(),(0,l.j4)(l.Ob,null,[(0,l.Wm)(M)],1024))])),_:1})])),_:1})}));function g(e,a,t,n,u,s){const r=(0,l.up)("q-icon"),i=(0,l.up)("q-input");return(0,l.wg)(),(0,l.j4)(l.HY,null,[(0,l.wy)((0,l.Wm)(i,{dark:"",dense:"",standout:"",modelValue:u.email,"onUpdate:modelValue":a[1]||(a[1]=e=>u.email=e),class:"q-ml-md",placeholder:"Email"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"person"})])),_:1},8,["modelValue"]),[[o.F8,null==u.fbUser]]),(0,l.wy)((0,l.Wm)(i,{dark:"",dense:"",standout:"",modelValue:u.password,"onUpdate:modelValue":a[2]||(a[2]=e=>u.password=e),class:"q-ml-md",type:"password",placeholder:"Пароль"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"lock"})])),_:1},8,["modelValue"]),[[o.F8,null==u.fbUser]]),(0,l.wy)((0,l.Wm)(r,{name:"login",onClick:s.logIn,style:{cursor:"pointer","font-size":"32px","padding-left":"10px"}},null,8,["onClick"]),[[o.F8,null==u.fbUser]]),(0,l.wy)((0,l.Wm)(r,{name:"logout",onClick:s.logOut,style:{cursor:"pointer","font-size":"32px","padding-left":"10px"}},null,8,["onClick"]),[[o.F8,null!=u.fbUser]])],64)}var $=t(5720);t(4042),t(4479);const U={name:"Fb",data(){return{idToDelete:"",email:"",password:"",fb:null,fbDb:null,fbAuth:null,fbUser:null,firebaseConfig:{apiKey:"AIzaSyArYm7jjrwBElTpA4h_CHDihFO6hWc2Ij8",authDomain:"vue-mm.firebaseapp.com",projectId:"vue-mm",storageBucket:"vue-mm.appspot.com",messagingSenderId:"910034929083",appId:"1:910034929083:web:7187260c798b2c76e9f09e",measurementId:"G-V1L9ZK0D05"}}},methods:{async logIn(){await this.fbAuth.signInWithEmailAndPassword(this.email,this.password);this.password=""},async logOut(){await this.fbAuth.signOut(),this.fbUser=null},async storeMap(e){if(!this.fbUser.hasOwnProperty("uid"))return"нужно войти";await this.fbDb.collection(`maps/${this.fbUser.uid}/maps`).doc("1").set(e)},async getMap(){if(!this.fbUser.hasOwnProperty("uid"))return"нужно войти";let e=await this.fbDb.collection(`maps/${this.fbUser.uid}/maps`).doc("1").get();return await e.data().map}},mounted(){this.fb=$.Z.initializeApp(this.firebaseConfig),this.fbDb=this.fb.firestore(),this.fbAuth=this.fb.auth(),this.fbDb.settings({timestampsInSnapshots:!0}),this.fbAuth.onAuthStateChanged((e=>{e&&(this.fbUser=e,this.$root.auth.email=e.email,this.$root.downloadMapFromCloud())})),this.$root.auth.uploadToCloudFb=async e=>{this.$root.auth.isLoading=!0,await this.storeMap({map:e}),setTimeout((()=>{this.$root.auth.isLoading=!1}),500)},this.$root.auth.downloadFromCloudFb=async()=>await this.getMap()}};var y=t(4689),C=t(4554),v=t(7518),q=t.n(v);U.render=g;const F=U;q()(U,"components",{QInput:y.Z,QIcon:C.Z});var Z=t(9929);const I=(0,l.aZ)({name:"MainLayout",components:{Fb:F,GoogleCalendar:Z.Z}});var Q=t(3066),D=t(3812),V=t(9570),A=t(1598),O=t(2165),x=t(3747),L=t(2025),M=t(2901),z=t(7011),T=t(2350),j=t(3414),S=t(2035),H=t(4974),P=t(2652);I.render=k,I.__scopeId="data-v-6572ca2e";const B=I;q()(I,"components",{QLayout:Q.Z,QHeader:D.Z,QToolbar:V.Z,QLinearProgress:A.Z,QBtn:O.Z,QToolbarTitle:x.Z,QSpace:L.Z,QDrawer:M.Z,QList:z.Z,QItemLabel:T.Z,QItem:j.Z,QItemSection:S.Z,QIcon:C.Z,QFile:H.Z,QPageContainer:P.Z})}}]);